"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[601],{601:(te,E,n)=>{n.r(E),n.d(E,{EmployeesModule:()=>X});var d=n(6895),m=n(7844),u=n(433),y=n(727);const Z=[{fieldGroupClassName:"row",fieldGroup:[{className:"col-6",key:"firstname",type:"input",templateOptions:{label:"First Name",required:!0,type:"text"}},{className:"col-6",key:"lastname",type:"input",templateOptions:{label:"Last Name",required:!0,type:"text"}},{className:" col-12",key:"email",type:"input",templateOptions:{label:"Email Adress",type:"email",required:!0}},{fieldGroupClassName:"row",fieldGroup:[{className:" col-12 col-md-4",key:"startDate",type:"input",templateOptions:{label:"Start Date",type:"date",required:!0}},{className:"col-12 col-md-4",key:"idNumber",type:"input",templateOptions:{label:"Enter National  Number",type:"number",required:!0}},{className:"col-12 col-md-4",key:"employeeIdNumber",type:"input",templateOptions:{label:"Employee ID ",type:"string",required:!0}}]},{className:" col-12",key:"department",type:"select",props:{label:"Department",type:"input",valueProp:"_id",labelProp:"departmentName"}},{fieldGroupClassName:"row",fieldGroup:[{className:"col-12 col-md-4",key:"employeeIdNumber",type:"input",templateOptions:{label:"Employee ID ",type:"string",required:!0}},{className:"col-12 col-md-4",key:"phoneNumber",type:"input",templateOptions:{label:"Phone Number",type:"number",required:!0}},{className:" col-12 col-md-4",key:"nextOfKin",type:"input",templateOptions:{label:"Next of kin",type:"text"}}]},{className:" col-12",key:"password",type:"input",templateOptions:{label:"Password",type:"password",required:!0}}]}];var g=n(9548),e=n(4650),r=n(9653),U=n(5733),v=n(4466),q=n(2357),f=n(5593),_=n(4057);let A=(()=>{class l{constructor(t,o,p,s,a,b){this.store=t,this.router=o,this.leaveService=p,this.activatedRoute=s,this.employeeService=a,this.utilService=b,this.subscription=new y.w0,this.departments=[],this.addEmployeeForm=new u.cw({}),this.employeeModel={},this.subscriptions=new y.w0,this.options={},this.fields=[]}ngOnInit(){this.fields=Z,this.updateOptions(),this.getDepartments(),this.getEmployeeFromParam()}ngOnDestroy(){this.subscription.unsubscribe()}createOrUpdateEmployee(){this.employee=this.addEmployeeForm.value;const t={...this.addEmployeeForm.value};this.store.dispatch(this.isEdit?g.VY.updateEmployee({update:{id:this.employeeId,changes:t}}):g.VY.createEmployee({employee:t})),this.router.navigateByUrl("/app/employees/all-employees"),this.addEmployeeForm.reset()}updateOptions(){this.fields=Z,console.log(this.fields),this.fields[0].fieldGroup[4].props.options=this.leaveService.getAllDepartments()}getDepartments(){this.subscription.add(this.leaveService.getAllDepartments().subscribe({next:t=>{}}))}getEmployeeFromParam(){this.subscription.add(this.activatedRoute.params.subscribe({next:t=>{this.employeeId=t.employeeId,this.getEmployeeById(this.employeeId)}}))}getEmployeeById(t){this.subscription.add(this.employeeService.getEmployeeByID(t).subscribe({next:o=>{this.employee=o.result,console.log(this.employee),this.employee._id=t,console.log(this.employee._id),this.employeeModel=o.result,this.isEdit=!0}}))}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(r.yh),e.Y36(m.F0),e.Y36(U.l),e.Y36(m.gz),e.Y36(v.G),e.Y36(q.f))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-add-employees"]],decls:14,vars:8,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-body"],[1,"container"],[1,"row"],[1,"col-auto"],[1,"h5","font-weight-bold"],[3,"formGroup"],[3,"model","fields","options","form"],[1,"text-end","mt-4"],["pButton","","pRipple","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-danger","me-2",2,"height","40px",3,"click"],["pButton","","type","button","icon","pi pi-plus",2,"height","40px",3,"label","disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"b",6),e._uU(7),e.qZA()()(),e._UZ(8,"br"),e.TgZ(9,"form",7),e._UZ(10,"formly-form",8),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e.NdJ("click",function(){return o.utilService.goBack()}),e.qZA(),e.TgZ(13,"button",11),e.NdJ("click",function(){return o.createOrUpdateEmployee()}),e.qZA()()()()()()),2&t&&(e.xp6(7),e.hij(" ",o.isEdit?"Edit":"Create"," Employee "),e.xp6(2),e.Q6J("formGroup",o.addEmployeeForm),e.xp6(1),e.Q6J("model",o.employeeModel)("fields",o.fields)("options",o.options)("form",o.addEmployeeForm),e.xp6(3),e.Q6J("label",o.isEdit?"Update":"Save")("disabled",!o.addEmployeeForm.valid))},dependencies:[u._Y,u.JL,u.sg,f.Hq,_.T7],changeDetection:0}),l})();var F=n(8274),w=n(9119);const C=(0,r.ZF)("employee"),T=F.VL.getSelectors(),O=(0,r.P1)(C,T.selectEntities),Y=(0,r.P1)(C,T.selectAll);(0,r.P1)(O,w.rk,(l,i)=>l?l[i?.params.id]:null);var S=n(1990),x=n(4325),h=n(805),c=n(8396);const I=["paginator"],J=function(){return["/app/employees/create"]};function G(l,i){1&l&&(e.TgZ(0,"div",13),e._UZ(1,"button",14)(2,"button",15),e.qZA()),2&l&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,J)))}function B(l,i){if(1&l&&(e.TgZ(0,"th",17),e._uU(1),e._UZ(2,"p-sortIcon",18),e.qZA()),2&l){const t=i.$implicit;e.Q6J("pSortableColumn",t),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("field",t)}}function M(l,i){if(1&l&&(e.TgZ(0,"tr"),e.YNc(1,B,3,3,"th",16),e._UZ(2,"th"),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.EmployeesTableColumns)}}function k(l,i){if(1&l){const t=e.EpF();e.TgZ(0,"tr",19)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td")(15,"div",20)(16,"button",21),e._uU(17," Action "),e.qZA(),e.TgZ(18,"ul",22)(19,"li")(20,"a",23),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onView(null==s?null:s._id))}),e._uU(21,"View"),e.qZA()(),e.TgZ(22,"li")(23,"a",23),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onEditBtnClick(null==s?null:s._id))}),e._uU(24,"Edit "),e.qZA()(),e.TgZ(25,"li")(26,"a",23),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.openDeleteDialog(s))}),e._uU(27,"Delete"),e.qZA()()()()()()}if(2&l){const t=i.$implicit;e.xp6(2),e.hij("",null==t?null:t.firstname," "),e.xp6(2),e.hij("",null==t?null:t.lastname," "),e.xp6(2),e.hij("",null==t?null:t.email," "),e.xp6(2),e.hij("",null==t?null:t.phoneNumber," "),e.xp6(2),e.Oqu(null==t||null==t.department?null:t.department.departmentName),e.xp6(2),e.Oqu(e.lcZ(13,6,null==t?null:t.startDate))}}let Q=(()=>{class l{constructor(t,o,p,s){this.store=t,this.router=o,this.employeeservice=p,this.dialogService=s,this.subscription=new y.w0,this.EmployeesTableColumns=["firstName","lastName","email","phoneNumber","department","startDate"]}ngOnInit(){this.employees$=this.store.pipe((0,r.Ys)(Y)),this.store.dispatch(g.VY.LoadEmployees())}ngOnDestroy(){this.subscription.unsubscribe()}onView(t){this.router.navigate(["/employees/employee",t])}onDeleteEmployee(t){this.store.dispatch(g.VY.deleteEmployee({id:t}))}onEditBtnClick(t){this.router.navigate(["/employees/edit-employee",t])}openDeleteDialog(t){this.dialogService.open(S.a,{width:"40%",height:"40%",header:"Delete Confirmation"}).onClose.subscribe(p=>{p&&this.onDeleteEmployee(t?._id)})}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(r.yh),e.Y36(m.F0),e.Y36(v.G),e.Y36(x.xA))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-all-employees"]],viewQuery:function(t,o){if(1&t&&e.Gf(I,7),2&t){let p;e.iGM(p=e.CRH())&&(o.paginator=p.first)}},features:[e._Bn([x.xA,h.ez])],decls:16,vars:3,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-body"],[1,"row","m-0"],[1,"col-auto"],[1,"fas","fa-hospital-user","fa-2x","sibasi-primary"],[1,"h5","font-weight-bold"],[1,"mt-1"],[1,"table-responsive"],[3,"value"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex"],["pButton","","type","button","label","Add","icon","pi pi-plus",1,"p-button-outlined","me-2",2,"height","40px",3,"routerLink"],["pButton","","label","Export","icon","pi pi-file-excel",1,"p-button-outlined",2,"height","40px"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[1,"p-selectable-row"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-danger","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"i",5),e.TgZ(6,"b",6),e._uU(7," Employee List"),e.qZA()(),e._UZ(8,"div",7),e.TgZ(9,"div",2)(10,"div",8)(11,"p-table",9),e.ALo(12,"async"),e.YNc(13,G,3,2,"ng-template",10),e.YNc(14,M,3,1,"ng-template",11),e.YNc(15,k,28,8,"ng-template",12),e.qZA()()()()()()()),2&t&&(e.xp6(11),e.Q6J("value",e.lcZ(12,1,o.employees$)))},dependencies:[d.sg,m.rH,f.Hq,c.iA,h.jx,c.lQ,c.fz,d.Ov,d.uU],changeDetection:0}),l})();var L=n(4374),D=n(326);const $=["paginator"];function j(l,i){if(1&l&&(e.TgZ(0,"th",16),e._uU(1),e._UZ(2,"p-sortIcon",17),e.qZA()),2&l){const t=i.$implicit;e.Q6J("pSortableColumn",t),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("field",t)}}function R(l,i){if(1&l&&(e.TgZ(0,"tr"),e.YNc(1,j,3,3,"th",15),e._UZ(2,"th"),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.leaveTableColumns)}}function H(l,i){if(1&l){const t=e.EpF();e.TgZ(0,"tr",18)(1,"td"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"div",19)(11,"button",20),e._uU(12," Action "),e.qZA(),e.TgZ(13,"ul",21)(14,"li")(15,"a",22),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onView(null==s?null:s._id))}),e._uU(16,"View"),e.qZA()(),e.TgZ(17,"li")(18,"a",22),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onEditBtnClick(null==s?null:s._id))}),e._uU(19,"Edit "),e.qZA()(),e.TgZ(20,"li")(21,"a",22),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onDeleteleave(null==s?null:s._id))}),e._uU(22,"Delete"),e.qZA()()()()()()}if(2&l){const t=i.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,3,null==t?null:t.startDate)),e.xp6(3),e.Oqu(e.lcZ(6,5,null==t?null:t.endDate)),e.xp6(3),e.Oqu(null==t?null:t.status)}}const P=[{path:"",redirectTo:"all-employees",pathMatch:"full"},{path:"all-employees",component:Q},{path:"employee/:employeeId",component:(()=>{class l{constructor(t,o,p,s,a,b,W,ee){this.leavService=t,this.router=o,this.employeeService=p,this.primengConfig=s,this.leavestore=a,this.leaveService=b,this.store=W,this.ActivatedRoute=ee,this.subscription=new y.w0,this.leaves=[],this.leaveTableColumns=["leaveType","startDate","EndDate","status"]}ngOnInit(){this.primengConfig.ripple=!0,this.getEmployeeFromParam()}ngOnDestroy(){this.subscription.unsubscribe()}getEmployeeFromParam(){this.subscription.add(this.ActivatedRoute.params.subscribe({next:t=>{const o=t.employeeId;this.getEmployeeId(o),console.log(o)}}))}getEmployeeId(t){this.subscription.add(this.employeeService.getEmployeeByID(t).subscribe({next:o=>{this.employee=o.result,console.log(this.employee.leave)}}))}getLeaveDetails(t){this.subscription.add(this.leavService.getLeaveRequestDetail(t).subscribe(o=>{}))}handleSelect(t){this.router.navigate([`/leave/leaves/details/${t}`])}updateLeave(t){this.router.navigate([`/leave/leaves/apply/${t}`])}deleteLeaveDialog(){this.display=!0}cancelDeleteLeaveDialog(){this.display=!1}onDeleteleave(t){this.store.dispatch(L.QH.deleteleave({id:t}))}onEditBtnClick(t){}onView(t){this.router.navigate([`/leave/leave-details/${t}`])}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(D.e),e.Y36(m.F0),e.Y36(v.G),e.Y36(h.b4),e.Y36(r.yh),e.Y36(D.e),e.Y36(r.yh),e.Y36(m.gz))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-employee-details"]],viewQuery:function(t,o){if(1&t&&e.Gf($,7),2&t){let p;e.iGM(p=e.CRH())&&(o.paginator=p.first)}},decls:41,vars:10,consts:[[1,"animated","fadeIn"],[1,"d-flex"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"d-flex","mt-2"],[1,"col-6"],[1,"col-6","text-mute"],[1,"col-6","d-flex","align-items-center"],[1,"card","mt-4"],[1,"row","m-0"],[1,"table-responsive"],[3,"value"],["pTemplate","header"],["pTemplate","body"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[1,"p-selectable-row"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-danger","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",1)(8,"div",6)(9,"strong"),e._uU(10,"Name:"),e.qZA()(),e.TgZ(11,"div",7),e._uU(12),e.ALo(13,"titlecase"),e.ALo(14,"titlecase"),e.qZA()(),e.TgZ(15,"div",1)(16,"div",6)(17,"strong"),e._uU(18," Email: "),e.qZA()(),e.TgZ(19,"div",7),e._uU(20),e.qZA()(),e.TgZ(21,"div",1)(22,"div",6)(23,"strong"),e._uU(24," Phone Number: "),e.qZA()(),e.TgZ(25,"div",7),e._uU(26),e.qZA()(),e.TgZ(27,"div",1)(28,"div",6)(29,"strong"),e._uU(30," Department: "),e.qZA()(),e.TgZ(31,"div",8),e._uU(32),e.qZA()()()()()()()()(),e.TgZ(33,"div",9)(34,"div",4)(35,"div",10)(36,"div",4)(37,"div",11)(38,"p-table",12),e.YNc(39,R,3,1,"ng-template",13),e.YNc(40,H,23,7,"ng-template",14),e.qZA()()()()()()),2&t&&(e.xp6(12),e.AsE(" ",e.lcZ(13,6,null==o.employee?null:o.employee.firstname)," ",e.lcZ(14,8,null==o.employee?null:o.employee.lastname)," "),e.xp6(8),e.hij(" ",(null==o.employee?null:o.employee.email)||"--"," "),e.xp6(6),e.hij(" ",(null==o.employee?null:o.employee.phoneNumber)||"--"," "),e.xp6(6),e.hij(" ",(null==o.employee||null==o.employee.department?null:o.employee.department.departmentName)||"--"," "),e.xp6(6),e.Q6J("value",o.employee.leave))},dependencies:[d.sg,c.iA,h.jx,c.lQ,c.fz,d.rS,d.uU],changeDetection:0}),l})()},{path:"create",component:A},{path:"edit-employee/:employeeId",component:A}];let V=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[m.Bz.forChild(P),m.Bz]}),l})();var N=n(8003),z=n(3336),K=n(1997);let X=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[d.ez,V,N.dTQ,u.UX,f.hJ,u.u5,c.U$,N.m81,K.U,z.z,_.X0.forRoot({validationMessages:[{name:"required",message:"This field is required"}]})]}),l})()}}]);